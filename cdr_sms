
 create table CDR_SMS
        (
        GENERATIONTIMESTAMP			DATE,
		SESSIONID					VARCHAR2(100),
		SESSIONSTARTTIME			DATE,
		DEVICEID					RAW(16),
		RECIPIENTADDRESS			NUMBER,
		RECORDID					VARCHAR2(100),
		RATINGGROUP					NUMBER,
		SUBSCRIPTIONID				RAW(16),
		ACCOUNTID					RAW(16),
		SUBSCRIPTIONSTARTDATETIME	DATE,
		SUBSCRIPTIONENDDATETIME		DATE,
		BUCKETBALANCEBEFORE			NUMBER,
		BUCKETBALANCEAFTER			NUMBER,
		BUCKETCOMMITEDUNITS			NUMBER,
		msisdn						NUMBER,
		imsi						NUMBER,
		ACCOUNTSTATE				NUMBER,
		ACCOUNTBALANCEBEFORE		NUMBER,
		ACCOUNTBALANCEAFTER			NUMBER,
		ACCOUNTBALANCECOMMITTED		NUMBER,
		ACCOUNTBALANCERESERVED		NUMBER,
		PRIMARYCOSTCOMMITTED		NUMBER,
		SECONDARYCOSTCOMMITTED		NUMBER,
		TOTALUNITSCHARGED			NUMBER,
		servicecontext_id			NUMBER,
		originhost_id				NUMBER,
		roamingindicator_id			NUMBER,
		calledcountry_id			NUMBER,   --COUNTRYNAME_ID
		recordeventtype_id			NUMBER,
		subscriptionstate_id		NUMBER,
		bundlename_id				NUMBER,
		bucketname_id				NUMBER,
		BUCKETINFOTARIFF_ID			NUMBER,   -- TARIFFID_ID
		RATE_ID						NUMBER,   -- New dic_rate table
		ACCOUNTINFOTARIFFID			NUMBER,   -- TARIFFID_ID
        file_id      	            NUMBER
        )
tablespace DCDR
partition by range (SESSIONSTARTTIME) 
INTERVAL (NUMTOYMINTERVAL(1, 'MONTH'))
        (
          partition FIRST_PART values less than (TO_DATE('2026-01-01 00:00:00', 'SYYYY-MM-DD HH24:MI:SS', 'NLS_CALENDAR=GREGORIAN'))
        );

create index CDR_SMS_IDX1 on CDR_SMS (SESSIONSTARTTIME, MSISDN)     nologging  local TABLESPACE ICDR;		


----Create table cdr_sms_file
create table CDR_SMS_FILE
(
  file_id      NUMBER not null,
  file_name    VARCHAR2(100),
  bdate        DATE,
  file_date    DATE,
  file_size    NUMBER,
  rows_cnt     NUMBER,
  sec_parse    NUMBER,
  sec_load     NUMBER,
  edate        DATE
)
tablespace DATMED;

create unique index CDR_SMS_FILE_IDX01 on CDR_SMS_FILE (FILE_NAME)
  tablespace IDXMED;

alter table CDR_SMS_FILE
add constraint CDR_SMS_FILE_KEY primary key (FILE_ID);



----Create table cdr_sms_tmp
create table CDR_SMS_TMP
(
           
	GENERATIONTIMESTAMP		VARCHAR2(100),
	SESSIONID				VARCHAR2(100),
	SERVICECONTEXTID 		VARCHAR2(100),
	SESSIONSTARTTIME 		VARCHAR2(100),
	ORIGINHOST 				VARCHAR2(100),
	DEVICEID 				VARCHAR2(100),
	RECIPIENTADDRESS 		VARCHAR2(100),
	ROAMINGINDICATOR 		VARCHAR2(100),
	CALLEDCOUNTRYNAME 		VARCHAR2(100),
	RECORDID 				VARCHAR2(100),
	RATINGGROUP 			VARCHAR2(100),
	SUBRECORDEVENTTYPE 		VARCHAR2(100),
	SUBSCRIPTIONID 			VARCHAR2(100),
	SUBSCRIPTIONSTATE 		VARCHAR2(100),
	BUNDLENAME 				VARCHAR2(100),
	ACCOUNTID 				VARCHAR2(100),
	SUBSCRIPTIONSTARTDATETIME VARCHAR2(100),
	SUBSCRIPTIONENDDATETIME VARCHAR2(100),
	BUCKETNAME 				VARCHAR2(100),
	BUCKETBALANCEBEFORE 	VARCHAR2(100),
	BUCKETBALANCEAFTER 		VARCHAR2(100),
	BUCKETCOMMITEDUNITS 	VARCHAR2(100),
	BUCKETINFOTARIFFID 		VARCHAR2(100),
	SUBSCRIPTIONIDTYPE_1 	VARCHAR2(100),
	SUBSCRIPTIONIDDATA_1 	VARCHAR2(100),
	SUBSCRIPTIONIDTYPE_2 	VARCHAR2(100),
	SUBSCRIPTIONIDDATA_2 	VARCHAR2(100),
	ACCOUNTSTATE 			VARCHAR2(100),
	ACCOUNTBALANCEBEFORE 	VARCHAR2(100),
	ACCOUNTBALANCEAFTER 	VARCHAR2(100),
	ACCOUNTBALANCECOMMITTED VARCHAR2(100),
	ACCOUNTBALANCERESERVED 	VARCHAR2(100),
	RATEID 					VARCHAR2(100),
	ACCOUNTINFOTARIFFID 	VARCHAR2(100),
	PRIMARYCOSTCOMMITTED 	VARCHAR2(100),
	SECONDARYCOSTCOMMITTED 	VARCHAR2(100),
	TOTALUNITSCHARGED 		VARCHAR2(100),
	file_id                 NUMBER
)
tablespace DATSML;
